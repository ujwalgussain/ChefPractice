package Dynamic_Programming;

import java.util.HashMap;

public class StockBuySellKTimes {

    //==================Brute Force Using Memoization=================================================///
    public int maxProfit(final int[] A) {
        int i=0, n= A.length;
        if(n<=1)
            return 0;
        if(n==2)
            return Math.max(0,A[1]-A[0]);
        return cal(A,2,0,A.length-1);
    }

    HashMap<Integer,Integer> map = new HashMap<>();

    public int cal(int A[], int k, int s, int n)
    {
        if(k==0 || s>=n)
            return 0;
        if(map.containsKey(s))
            return map.get(s);
        int max=0;
        for(int i=s;i<n;i++)
        {
            for(int j=i+1;j<n;j++)
            {
                if(A[j]-A[i]>0)
                {
                    int profit = A[j]-A[i]+cal(A,k-1,j+1,n);
                    max = Math.max(max,profit);
                }
            }
        }
        map.put(s,max);
        return max;
    }

    //==================Brute Force Using Memoization=================================================///

    public static void main(String[] args) {
        System.out.println(new StockBuySellKTimes().maxProfit(new int[] {5958470, 5631959, 5630005, 2672689, 9639336, 6395933, 5940282, 7601370, 5077027, 1136837, 7717132, 148218, 3198527, 9250908, 2550504, 6678406, 9208866, 8836527, 6343988, 2999758, 8957983, 9551747, 6872326, 3639557, 4168992, 1589156, 8545264, 4698072, 9684444, 486411, 2535339, 2721150, 6971735, 5498991, 5975581, 3658445, 1945073, 3037695, 6688302, 4075888, 9436566, 8091167, 3213273, 2985691, 637360, 9884646, 1591204, 9319893, 8475841, 4376165, 8400502, 7030572, 2112885, 2673484, 8317481, 6239522, 1364911, 4356516, 3028046, 9888986, 9959817, 6561549, 927368, 9941012, 2758628, 9805093, 510854, 6762021, 8350187, 8507389, 9409991, 4502302, 3037658, 8024632, 9680451, 4057276, 6206995, 5217836, 175202, 7933938, 8566885, 4871234, 1914857, 3300463, 5803306, 9430347, 5999180, 2066934, 8981684, 5758172, 9555696, 4164036, 1939776, 5496667, 5166590, 1314502, 9392004, 5847710, 4181046, 4002661, 6721308, 9047340, 7605368, 5561404, 6908956, 403052, 2773526, 5978099, 2951960, 3812721, 9901071, 7406487, 6511606, 2548546, 1394396, 7658179, 2769077, 9067522, 9320776, 1954002, 5065572, 4672074, 7542744, 9633503, 8863868, 6785003, 5142781, 7332523, 611940, 4523105, 6651634, 7146274, 2707606, 8036550, 3245645, 5343317, 8353946, 6227653, 4939764, 1819312, 1755075, 5684196, 5682809, 800028, 6687119, 9920726, 301998, 7508455, 6720556, 2639149, 7750140, 2476100, 9227619, 7455608, 5053065, 3932787, 1968781, 4880230, 4736917, 5462359, 1609207, 8390841, 8365877, 2595907, 9140171, 4666492, 8152396, 1570372, 3082272, 8324602, 7432019, 1201570, 7256028, 153961, 6725615, 9949440, 1504727, 2518486, 2824417, 6171305, 9114391, 9423887, 3509593, 1000581, 8411979, 8671732, 889746, 8432554, 8337271, 5436797, 6083147, 5049689, 1194570, 2037775, 6653737, 5849784, 3219023, 5298619, 2308092, 7310753, 7989365, 8163409, 2749467, 4620813, 8405719, 6934756, 2599579, 8130239, 9269932, 4036367, 4108258, 9323059, 7862641, 5974839, 1101820, 9511575, 6152126, 9302710, 1074609, 8769905, 5272117, 7809897, 1293438, 5694494, 6508595, 9180053, 6829167, 8892697, 2977652, 6771878, 6214623, 7129335, 9941442, 2631818, 498433, 4202358, 1714473, 5545916, 1881355, 533682, 4256335, 1784884, 2976293, 4852041, 6962232, 8777590, 5262552, 8954318, 7241886, 7073761, 4012346, 2345540, 1978415, 1783547, 2997684, 570605, 3667378, 387291, 3783995, 5709816, 550589, 7669435, 1561935, 7868406, 970607, 5737938, 5511291, 3204816, 9695151, 9812563, 4635102, 3877499, 4314932, 4844429, 8315149, 3184053, 9516077, 7397305, 7794040, 2292518, 8554065, 1990084, 2354947, 7055342, 7973907, 6347811, 7307742, 53893, 3612316, 1136193, 3836309, 7977633, 9473843, 4629863, 5260867, 3986135, 3659055, 6918153, 9133059, 1095518, 4932463, 9621357, 7985455, 6905365, 1086436, 3684725, 8439632, 5695122, 4509430, 7288479, 9713907, 9495160, 6023374, 7418472, 846763, 6017345, 7249618, 1236343, 5448325, 6427785, 6175656, 7048283, 5184046, 1910623, 7774928, 5411262, 3564835, 3811098, 14523, 3878981, 677936, 4608031, 2185245, 2241104, 1025831, 916329, 4942716, 457868, 7503388, 7170571, 1570400, 2957097, 4778861, 3496432, 4904813, 1556243, 9532571, 2205419, 6228572, 1392101, 5286181, 2286944, 5878562, 4699750, 735040, 4379083, 3643386, 6239697, 3152380, 5941648, 4862822, 589216, 3429528, 5053767, 6265459, 9332048, 9652961, 5446114, 5522404, 6304276, 8083198, 4944208, 2507403, 57897, 7402095, 4893123, 5702030, 7462838, 9238064, 450745, 1292581, 8890770, 3082914, 5817914, 9599788, 49068, 1542846, 127339, 9614809, 3722358, 1231893, 4310069, 6641659, 5966803, 7906750, 697340, 4284909, 898518, 4764616, 643299, 4298995, 7850559, 3833559, 1696775, 6935121, 5204471, 9644101, 1434972, 5045182, 6071809, 7309393, 2547278, 5694198, 8236943, 7536355, 5813862, 6513135, 3114701, 5635653, 5431765, 7299460, 2607860, 3152949, 962072, 6532082, 3778972, 3308064, 3553300, 151034, 619255, 817907, 9671790, 8847970, 8255535, 3069183, 4862967, 8010927, 3644025, 1368293, 9301208, 9010838, 3846041, 5901656, 9605401, 5184400, 5337344, 1262525, 7060629, 2683247, 7892057, 8116819, 9920078, 2468179, 3877311, 8073881, 373205, 5051425, 77025, 3693001, 9198045, 1829469, 7479062, 5143190, 228595, 9613486, 6950331, 9144218, 6036024, 27000, 9958016, 742681, 4403440, 9420170, 5820403, 2089395, 221997, 795540, 5560797, 8904962, 3001255, 6137860, 7692324, 5901214, 1758989, 9152493, 1135945, 3762604, 2545211, 9050773, 172047, 1764910, 1453571, 4434378, 1298443, 3907951, 2359100, 4478899, 5817708, 2878157, 4062813, 6774997, 4571829, 8164609, 6183643, 9149537, 7986408, 2528936, 3031310, 4685416, 1487221, 1499733, 6571319, 3406435, 8771503, 736279, 8136846, 461213, 1114008, 6375071, 7688590, 9878105, 9520387, 5470763, 4310254, 1709142, 6567405, 3591025, 456721, 2884959, 8291795, 5339396, 4706388, 6247276, 618452, 6370405, 9777075, 9047608, 3742729, 7167528, 4668579, 2099065, 1948021, 6617545, 4335732, 5018982, 8963622, 8064735, 4581769, 7270193, 3031735, 3191202, 4924277, 1443497, 2566717, 8783555, 5964624, 3156657, 5510885, 9616344, 5008952, 1549967, 1381448, 4135595, 9364960, 3277436, 2650104, 9402679, 1400868, 3375956, 9776779, 6208978, 4629736, 3304431, 6262803, 4103672, 6457036, 2689638, 6760616, 4441860, 3635183, 6769413, 6387455, 1290088, 3012933, 7664956, 9371115, 3814445, 4542240, 7866832, 5375654, 6648493, 7001673, 1600798, 9197034, 92563, 3446720, 9487534, 5244416, 9568836, 9931078, 1261538, 4836826, 1065699, 3230421, 5317532, 8754822, 8328331, 7643971, 3115983, 9828406, 6868775, 6867972, 934433, 3581318, 2381322, 3777364, 6933011, 7814125, 8049941, 5072991, 1585268, 5753614, 278996, 7267776, 4127744, 3472618, 6651753, 7544224, 4059533, 6399856, 2795010, 1479578, 9692236, 5982911, 5908649, 1734326, 129344, 6044853, 3013969, 9589155, 3445494, 6838133, 3973168, 5931370, 9892031, 8473509, 43716, 2690718, 5531771, 6258386, 4906685, 9783776, 8589968, 1077649, 7873988, 97070, 5193652, 3861805, 4701943, 3203863, 6735197, 576379, 8955071, 4022989, 8226920, 1928264, 4150744, 9523641, 8140935, 6281747, 6884373, 8900308, 9023360, 4186833, 3192340, 5204397, 2672866, 3983375, 3950739, 8967205, 6774348, 5352002, 498569, 5597845, 9102508, 4721630, 1056732, 594487, 1190563, 1100858, 9758751, 7638729, 7831149, 8414155, 5692087, 3229916, 3772882, 5938140, 7180852, 8721466, 3177726, 4510007, 9245583, 2758744, 2908460, 4844536, 7179606, 3445850, 771014, 3444577, 3408524, 6490111, 3743856, 7177333, 8129389, 9140026, 6912896, 3627122, 1705917, 9577994, 4352724, 3328727, 2352951, 3625014, 7786627, 489081, 3199153, 3712686, 4966890, 8235888, 7429065, 1375644, 9614284, 4248084, 169666, 7444355, 8888808, 2274828, 6044907, 5879736, 3154186, 2851256, 513721, 675201, 2673709, 760463, 116147, 5612097, 323762, 2792810, 827075, 5268212, 2418233, 8652628, 2718522, 5503953, 7800433, 6056163, 8920858, 8323553, 4313626, 2384550, 1621629, 6424553, 2002881, 3990274, 6814496, 3323930, 8789106, 27312, 340327, 7099524, 2800172, 6426165, 5952815, 1625698, 3179143, 9872778, 5686020, 789310, 7354144, 4971754, 8437874, 6535134, 1064938, 3380970, 2027267, 8412713, 8166398, 7172237, 3751122, 8468330, 4099199, 4189398, 280280, 4003927, 5807897, 8751738, 921864, 8116502, 5574745, 4366289, 2531027, 4939575, 8796623, 8440149, 7441456, 9545329, 367428, 3058532, 3838610, 1426175, 7372071, 9297320, 9509186, 3035312, 9276623, 6135887, 1567221, 3978186, 1901973, 9135004, 5270772, 4731937, 8172233, 6720325, 2139345, 505387, 4251781, 973330, 5033057, 1722186, 5116682, 7858021, 5625497, 111300, 9636428, 2382653, 3244196, 2530447, 7358367, 4105960, 430302, 2691810, 6911520, 5307335, 6901313, 2751597, 8338307, 8576364, 4301212, 4903012, 3809796, 3736104, 5526670, 2778570, 1581251, 3789365, 8277692, 292707, 200877, 7255766, 1926371, 5778927, 846290, 1419244, 6285179, 7948604, 1374826, 765022, 2024831, 3701537, 3877950, 563079, 5808708, 8914163, 2062374, 2968151, 2227115, 4341258, 1602170, 8726573, 6340666, 9179928, 1315070, 6182146, 3903628, 7621034, 8000578, 2525850, 7868133, 3595455}
        ));
    }
}
